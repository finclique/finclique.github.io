<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% seo %}

    <!-- ==========================================================================
         PERBAIKAN PERFORMA
         ========================================================================== -->

    <!-- 1. Preconnect ke Google Fonts untuk mempercepat koneksi -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <!-- 2. Muat Google Fonts secara Asynchronous (tidak memblokir render) -->
    <link rel="stylesheet" media="print" onload="this.media='all'" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Open+Sans:wght@400;600&display=swap">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Open+Sans:wght@400;600&display=swap"></noscript>
    
    <!-- 3. Inline CSS utama (main.css) untuk menghilangkan render-blocking request & memperbaiki cache -->
    <style>
    {% include_relative assets/css/main.css %}
    </style>

</head>
<body>

    {% include header.html %}
    {% include navigation.html %}

    <section class="ad-section-responsive">
        <div class="container">
            <img src="https://via.placeholder.com/970x90.png?text=Iklan+Header+Responsif" alt="Iklan Header">
        </div>
    </section>

    <main class="container">
        {{ content }}
    </main>
    
    <section class="ad-section-responsive">
        <div class="container">
            <img src="https://via.placeholder.com/970x90.png?text=Iklan+Bawah+Responsif" alt="Iklan Bawah">
        </div>
    </section>

    {% include footer.html %}

    <!-- Popup Pencarian (HTML tetap sama) -->
    <div id="search-overlay" class="search-overlay">
        <div class="search-modal">
            <button id="close-search" class="close-search" aria-label="Tutup Pencarian">&times;</button>
            <h3>Cari Artikel</h3>
            <input type="search" id="search-input-modal" placeholder="Ketik judul atau kata kunci..." autocomplete="off">
            <ul id="results-container"></ul>
        </div>
    </div>

    <!-- 4. Defer JavaScript (agar tidak memblokir render) -->
    <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js" defer></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // --- Bagian Menu Mobile (Sudah Ada) ---
        const hamburgerBtn = document.getElementById('hamburger-btn');
        const desktopMenu = document.getElementById('desktop-menu');
        hamburgerBtn.addEventListener('click', function() {
            desktopMenu.classList.toggle('is-active');
        });

        // --- PERBAIKAN TOTAL: LOGIKA POPUP PENCARIAN ---
        const searchOverlay = document.getElementById('search-overlay');
        const searchInputModal = document.getElementById('search-input-modal');
        const openSearchTriggers = document.querySelectorAll('.open-search-trigger');
        const closeSearchBtn = document.getElementById('close-search');

        // Fungsi untuk membuka popup
        function openSearch() {
          searchOverlay.classList.add('is-visible');
          setTimeout(() => searchInputModal.focus(), 300); // Fokus ke input setelah transisi
        }

        // Fungsi untuk menutup popup
        function closeSearch() {
          searchOverlay.classList.remove('is-visible');
        }

        // Tambahkan event listener ke semua tombol trigger
        openSearchTriggers.forEach(trigger => {
          trigger.addEventListener('click', function(event) {
            event.preventDefault(); // Mencegah form submit
            openSearch();
          });
        });
        
        // Event listener untuk tombol close
        closeSearchBtn.addEventListener('click', closeSearch);

        // Event listener untuk menutup saat klik di luar area modal
        searchOverlay.addEventListener('click', function(event) {
          if (event.target === searchOverlay) {
            closeSearch();
          }
        });
        
        // Event listener untuk menutup dengan tombol Escape
        document.addEventListener('keydown', function(event) {
          if (event.key === 'Escape' && searchOverlay.classList.contains('is-visible')) {
            closeSearch();
          }
        });

        // Inisialisasi Simple-Jekyll-Search
        SimpleJekyllSearch({
          searchInput: searchInputModal,
          resultsContainer: document.getElementById('results-container'),
          json: '/search.json',
          searchResultTemplate: '<li><a href="{url}"><h4>{title}</h4><span class="search-date">{date}</span></a></li>',
          noResultsText: '<li>Tidak ada hasil ditemukan.</li>',
          limit: 10,
          fuzzy: false
        });
      });
    </script>

</body>
</html>



