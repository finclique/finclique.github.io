<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Thumbnail Generator (Responsive)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; display: flex; gap: 20px; background-color: #f0f2f5; padding: 20px; line-height: 1.5; }
        .controls { flex: 1; min-width: 300px; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); max-height: 90vh; overflow-y: auto; }
        .preview-wrapper { flex: 2; display: flex; flex-direction: column; align-items: center; }
        h1, h2 { color: #2c3e50; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: 600; margin-bottom: 5px; font-size: 0.9em; }
        input[type="text"], input[type="color"], input[type="file"] { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        input[type="color"] { height: 40px; padding: 5px; }
        .download-btn { background: #2ecc71; color: #fff; border: none; padding: 12px 20px; border-radius: 5px; cursor: pointer; font-size: 1.1em; font-weight: bold; display: block; width: 100%; margin-top: 20px; transition: background 0.2s; }
        .download-btn:hover { background: #27ae60; }

        /* Styles for the Thumbnail Canvas */
        #thumbnail-container { transform: scale(0.6); transform-origin: top center; }
        #thumbnail {
            width: 1200px;
            height: 675px;
            position: relative;
            overflow: hidden;
            background-color: #fff;
            font-family: 'Segoe UI', sans-serif;
        }
        .shape { position: absolute; }
        .shape.primary-bg { background-color: #6a23c3; }
        .shape.secondary-bg { background-color: #e0f5ff; }

        .shape.top-right { width: 400px; height: 400px; border-radius: 50%; top: -150px; right: -150px; }
        .shape.bottom-left { width: 400px; height: 400px; border-radius: 50%; bottom: -200px; left: -200px; }
        .shape.center-blob { width: 800px; height: 450px; border-radius: 100px; top: 110px; right: -100px; opacity: 0.8; transform: rotate(15deg); }
        .dots { display: grid; grid-template-columns: repeat(4, 5px); gap: 5px; position: absolute; }
        .dots .dot { width: 5px; height: 5px; background-color: #333; border-radius: 50%; }
        .dots.top-left { top: 50px; left: 50px; }
        .dots.bottom-right { bottom: 100px; right: 80px; }
        #logo-container { position: absolute; top: 250px; left: 100px; width: 300px; height: 150px; display:flex; align-items:center; justify-content:center; }
        #logo-preview { max-width: 100%; max-height: 100%; }
        #text-container { position: absolute; top: 200px; left: 500px; color: #1e1e1e; }
        #text-container h2 { font-size: 80px; font-weight: 900; line-height: 1.1; margin: 0; padding:0; border:0; }
        #text-container h3 { font-size: 70px; font-weight: 500; line-height: 1.1; margin: 0; padding:0; }
        #tags-container { position: absolute; top: 450px; left: 500px; display: flex; gap: 15px; }
        .tag { padding: 10px 30px; border-radius: 50px; font-size: 24px; font-weight: 500; }
        .tag.bg { background-color: #6a23c3; }
        .tag.text { color: #fff; }
        #brand-container { position: absolute; bottom: 30px; right: 50px; background: #eee; padding: 8px 15px; border-radius: 50px; font-size: 20px; color: #555; }
        
        /* ==========================================================================
           PERBAIKAN: Responsive Styles for Mobile
           ========================================================================== */
        @media (max-width: 800px) {
            body {
                flex-direction: column; /* Ubah tata letak menjadi vertikal */
                padding: 10px;
            }
            .controls {
                max-height: none; /* Izinkan panel kontrol mengambil tinggi penuh */
                order: 1; /* Tampilkan panel kontrol terlebih dahulu */
            }
            .preview-wrapper {
                order: 2; /* Tampilkan pratinjau setelahnya */
                margin-top: 20px;
            }
            #thumbnail-container {
                /* Perkecil pratinjau agar pas di layar ponsel */
                transform: scale(0.45); 
                /* Sesuaikan tinggi kontainer untuk mengurangi ruang kosong */
                height: 320px; 
            }
        }

        @media (max-width: 480px) {
            #thumbnail-container {
                /* Perkecil lagi untuk layar yang sangat sempit */
                transform: scale(0.3);
                height: 220px;
            }
        }

    </style>
</head>
<body>

    <div class="controls">
        <h1>Thumbnail Generator</h1>
        
        <h2>Teks</h2>
        <div class="form-group">
            <label for="title1">Judul Baris 1</label>
            <input type="text" id="title1" value="Blogger PWA">
        </div>
        <div class="form-group">
            <label for="title2">Judul Baris 2</label>
            <input type="text" id="title2" value="CF Workers">
        </div>
        <div class="form-group">
            <label for="tag1">Tag 1</label>
            <input type="text" id="tag1" value="Blogger">
        </div>
        <div class="form-group">
            <label for="tag2">Tag 2</label>
            <input type="text" id="tag2" value="PWA">
        </div>

        <h2>Gambar</h2>
        <div class="form-group">
            <label for="logo-upload">Logo Utama</label>
            <input type="file" id="logo-upload" accept="image/*">
        </div>
         <div class="form-group">
            <label for="brand">Teks Brand (pojok kanan bawah)</label>
            <input type="text" id="brand" value="Fineshop Design">
        </div>

        <h2>Warna</h2>
        <div class="form-group">
            <label for="bg-color">Latar Belakang</label>
            <input type="color" id="bg-color" value="#FFFFFF">
        </div>
        <div class="form-group">
            <label for="text-color">Teks Judul</label>
            <input type="color" id="text-color" value="#1e1e1e">
        </div>
        <div class="form-group">
            <label for="primary-color">Bentuk Primer (Ungu)</label>
            <input type="color" id="primary-color" value="#6a23c3">
        </div>
        <div class="form-group">
            <label for="secondary-color">Bentuk Sekunder (Biru Muda)</label>
            <input type="color" id="secondary-color" value="#e0f5ff">
        </div>
        <div class="form-group">
            <label for="tag-bg-color">Latar Tag</label>
            <input type="color" id="tag-bg-color" value="#6a23c3">
        </div>
        <div class="form-group">
            <label for="tag-text-color">Teks Tag</label>
            <input type="color" id="tag-text-color" value="#FFFFFF">
        </div>

        <button class="download-btn" onclick="downloadThumbnail()">Unduh Thumbnail (1200x675)</button>
    </div>

    <div class="preview-wrapper">
        <div id="thumbnail-container">
            <div id="thumbnail">
                <!-- Decorative Shapes -->
                <div class="shape primary-bg top-right"></div>
                <div class="shape primary-bg bottom-left"></div>
                <div class="shape secondary-bg center-blob"></div>
                <div class="dots top-left"></div>
                <div class="dots bottom-right"></div>

                <!-- Content -->
                <div id="logo-container">
                    <img id="logo-preview" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgNjAiPjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBkb21pbmFudC1iYXNlbGluZT0ibWlkZGxlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzg4OCI+UngVwcm9hZCBZb3VyIExvZ288L3RleHQ+PC9zdmc+" alt="Logo Preview">
                </div>
                <div id="text-container">
                    <h2 id="title1-preview">Blogger PWA</h2>
                    <h3 id="title2-preview">CF Workers</h3>
                </div>
                <div id="tags-container">
                    <span class="tag bg text" id="tag1-preview">Blogger</span>
                    <span class="tag bg text" id="tag2-preview">PWA</span>
                </div>
                <div id="brand-container">
                    <span id="brand-preview">Fineshop Design</span>
                </div>
            </div>
        </div>
    </div>

<script>
    // Get all elements
    const elements = {
        title1: document.getElementById('title1'),
        title2: document.getElementById('title2'),
        tag1: document.getElementById('tag1'),
        tag2: document.getElementById('tag2'),
        logoUpload: document.getElementById('logo-upload'),
        brand: document.getElementById('brand'),
        bgColor: document.getElementById('bg-color'),
        textColor: document.getElementById('text-color'),
        primaryColor: document.getElementById('primary-color'),
        secondaryColor: document.getElementById('secondary-color'),
        tagBgColor: document.getElementById('tag-bg-color'),
        tagTextColor: document.getElementById('tag-text-color'),
    };

    const previews = {
        thumbnail: document.getElementById('thumbnail'),
        title1: document.getElementById('title1-preview'),
        title2: document.getElementById('title2-preview'),
        tag1: document.getElementById('tag1-preview'),
        tag2: document.getElementById('tag2-preview'),
        logo: document.getElementById('logo-preview'),
        brand: document.getElementById('brand-preview'),
        textContainer: document.getElementById('text-container'),
        primaryShapes: document.querySelectorAll('.shape.primary-bg'),
        secondaryShape: document.querySelector('.shape.secondary-bg'),
        tagBgs: document.querySelectorAll('.tag.bg'),
        tagTexts: document.querySelectorAll('.tag.text'),
    };
    
    // Create dot grids
    const dotGrid1 = document.querySelector('.dots.top-left');
    const dotGrid2 = document.querySelector('.dots.bottom-right');
    for (let i = 0; i < 16; i++) {
        const dot = document.createElement('div');
        dot.className = 'dot';
        dotGrid1.appendChild(dot.cloneNode());
        dotGrid2.appendChild(dot.cloneNode());
    }

    // Add event listeners
    elements.title1.addEventListener('input', e => previews.title1.textContent = e.target.value);
    elements.title2.addEventListener('input', e => previews.title2.textContent = e.target.value);
    elements.tag1.addEventListener('input', e => previews.tag1.textContent = e.target.value);
    elements.tag2.addEventListener('input', e => previews.tag2.textContent = e.target.value);
    elements.brand.addEventListener('input', e => previews.brand.textContent = e.target.value);
    
    elements.bgColor.addEventListener('input', e => previews.thumbnail.style.backgroundColor = e.target.value);
    elements.textColor.addEventListener('input', e => previews.textContainer.style.color = e.target.value);
    elements.primaryColor.addEventListener('input', e => previews.primaryShapes.forEach(s => s.style.backgroundColor = e.target.value));
    elements.secondaryColor.addEventListener('input', e => previews.secondaryShape.style.backgroundColor = e.target.value);
    elements.tagBgColor.addEventListener('input', e => previews.tagBgs.forEach(t => t.style.backgroundColor = e.target.value));
    elements.tagTextColor.addEventListener('input', e => previews.tagTexts.forEach(t => t.style.color = e.target.value));

    elements.logoUpload.addEventListener('change', e => {
        if (e.target.files && e.target.files[0]) {
            const reader = new FileReader();
            reader.onload = function(event) {
                previews.logo.src = event.target.result;
            }
            reader.readAsDataURL(e.target.files[0]);
        }
    });

    // Download function
    function downloadThumbnail() {
        const thumbnailNode = document.getElementById('thumbnail');
        // Temporarily remove transform to capture at full resolution
        const container = document.getElementById('thumbnail-container');
        container.style.transform = 'scale(1)';

        html2canvas(thumbnailNode, {
            width: 1200,
            height: 675,
            scale: 1,
            useCORS: true
        }).then(canvas => {
            const link = document.createElement('a');
            link.download = 'thumbnail.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
            link.remove();
            
            // Re-apply transform after capture
            container.style.transform = 'scale(0.6)';
        });
    }

</script>
</body>
</html>
